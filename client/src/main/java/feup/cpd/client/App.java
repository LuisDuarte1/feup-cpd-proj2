/*
 * This Java source file was generated by the Gradle 'init' task.
 */
package feup.cpd.client;

import feup.cpd.game.Game;
import feup.cpd.protocol.MessageReader;
import feup.cpd.protocol.ProtocolFacade;
import feup.cpd.protocol.models.LoginRequest;
import feup.cpd.protocol.models.ProtocolModel;
import feup.cpd.protocol.models.Status;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.net.InetSocketAddress;
import java.nio.channels.SocketChannel;
import java.util.Scanner;

public class App {
    public static void main(String[] args) throws IOException {
        //change this to be compatible with docker
        SocketChannel clientChannel = SocketChannel.open(new InetSocketAddress("localhost", 4206));
        Scanner scanner = new Scanner(System.in);
        System.out.print("Enter username: ");
        String username = scanner.nextLine();

        System.out.print("Enter password: ");
        String password = scanner.nextLine();

        clientChannel.write(ProtocolFacade.createPacket(new LoginRequest(username, password)));

        ProtocolModel protocolModel = MessageReader.readMessageFromSocket(clientChannel);
        assert protocolModel != null;
        System.out.println(((Status) protocolModel).message);
    }
}
